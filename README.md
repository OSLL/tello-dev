# Обучение управлению дронами Tello

## Зависимости

Необходимые библиотеки лежат в `requirements.txt`.

Установка происходит командой `pip3 install -r requirements.txt`

## Запуск

Перед запуском решений необходимо подключиться к сети дрона.

Все решения запускаются через `main.py`: `python3 main.py -s <solution>`

Текущие решения:
* `default` -- решение по-умолчанию: после взлета поднимает дрона на 150см, поворачивает его на 360 градусов и приземляет его.
* `simple_lib_demo` -- простой пример использования дрона при помощи библиотеки djitellopy ([wiki страничка про библиотеки](./wiki/simple_using.md)). Программа дрона:
  * пролететь вперёд на 100см
  * подняться на 100см
  * повернуться вправо на 90 градусов
  * опуститься на 50см
  * пролететь влево на 100см
  * сдлеать сальто назад, вправо и вперёд
* `simple_socket_demo` -- использование дрона при помощи сокетов без каких-либо других библиотек. Решение максимально простое, поэтому нестабильное. Программа дрона:
  * пролететь вперёд на 100см
  * подняться на 100см
  * повернуться на 360 градусов вправо
* `test_all_sensors_demo` -- проверка всех сенсоров. Программа дрона как у `simple_lib_demo` решения. При этом на текущее видео с дрона наносятся данные с его сенсоров и датчиков.
* `follow_marker_with_coords` -- следование за маркером при помощи опредлении координат маркера относительно дрона. Видео с дрона записывается в `drone_stream.avi` файл. *Требуется откалиброванная камеры*
* `follow_marker_with_pixels` -- аналогично `follow_marker_with_coords`, только координаты вычисляются при помощи смещения маркера от центра изображения, перемещение дрона всегда на заданное расстояние по одной оси координат. Видео с дрона записывается в `drone_stream.avi` файл.
* `camera_calibration` -- калибровка камеры. Результаты будут в папке `calibration_results`

Если решение требует параметров камеры, то оно будет пытаться их считать из файла `camera_setting.npy`

## Структура папок

|     Папка         |        Описание         |
|:------------------|:------------------------|
|     `drone`       | Базовые классы для взаимодействия с дроном, которые используются решениями |
|     `utils`       | Общие полезные функции |
|     `wiki`        | Wiki-странички с полезной информацией |
|     `ros`         | Использование дрона при помощи ROS |
|   `solutions`     | Решения для запуска на дроне |
| `solutions/calibration` | Калибровка дрона: камера |
| `solutions/simple_use`  | Простое использование дрона. Решения `simple_lib_demo`, `simple_socket_demo`, `test_all_sensors_demo` |
| `solutions/following`   | Решения для следования за маркером: `follow_marker_with_coords`, `follow_marker_with_pixels` |


## ROS

Использование Tello дронов с ROS находится с [папке `ros`](./ros)

## Полезные ссылки

* [Оффициальные мануалы](https://www.ryzerobotics.com/tello-edu/downloads)
* [Оффициальные примеры кода](https://github.com/dji-sdk/Tello-Python)
* [Github репозиторий библиотеки DJITelloPy](https://github.com/damiafuentes/DJITelloPy)
